<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Global Economic Document Base</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;600;700;800&display=swap');
        body { font-family: 'Plus Jakarta Sans', sans-serif; }
        .glass-card {
            background: rgba(255, 255, 255, 0.7);
            backdrop-filter: blur(16px);
            border: 1px solid rgba(255, 255, 255, 0.4);
            transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }
        .glass-card:hover {
            transform: translateY(-8px) scale(1.02);
            box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.1);
        }
        .search-highlight {
            background: #fde68a;
            padding: 0 2px;
            border-radius: 2px;
        }
    </style>
</head>
<body class="bg-[#f0f2f5] min-h-screen text-slate-900">

    <!-- Navbar -->
    <nav class="sticky top-0 z-50 bg-white/70 backdrop-blur-xl border-b border-white/20">
        <div class="max-w-7xl mx-auto px-6 h-20 flex items-center justify-between">
            <div class="flex items-center space-x-4">
                <div class="w-10 h-10 bg-indigo-600 rounded-xl flex items-center justify-center shadow-lg shadow-indigo-200">
                    <i class="fas fa-landmark text-white"></i>
                </div>
                <div>
                    <span class="text-xl font-extrabold tracking-tighter text-slate-900 uppercase">GiruStar <span class="text-indigo-600">DocDB</span></span>
                    <p class="text-[10px] font-bold text-slate-400 tracking-widest uppercase">Global Economic Archive</p>
                </div>
            </div>
            <div id="sync-status" class="hidden sm:flex items-center space-x-2 text-[11px] font-bold text-slate-400 bg-white/50 px-4 py-2 rounded-full border border-white/50 shadow-sm">
                <span class="relative flex h-2 w-2">
                    <span class="animate-ping absolute inline-flex h-full w-full rounded-full bg-emerald-400 opacity-75"></span>
                    <span class="relative inline-flex rounded-full h-2 w-2 bg-emerald-500"></span>
                </span>
                <span id="sync-text">System Live</span>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <main class="max-w-7xl mx-auto px-6 py-12">
        <div class="max-w-4xl mx-auto text-center mb-16">
            <h1 class="text-5xl font-extrabold text-slate-900 mb-6 tracking-tight">
                世界中の経済データを<br><span class="text-transparent bg-clip-text bg-gradient-to-r from-indigo-600 to-blue-600">指先ひとつで。</span>
            </h1>
            <p class="text-slate-500 text-lg font-medium">各国政府および国際機関が発行する最新の経済公的文書を一元管理します。</p>
        </div>

        <!-- Toolbar -->
        <div class="grid grid-cols-1 md:grid-cols-12 gap-4 mb-12">
            <div class="md:col-span-7 relative">
                <i class="fas fa-search absolute left-5 top-1/2 -translate-y-1/2 text-slate-400"></i>
                <input type="text" id="searchInput" placeholder="国名、組織名、またはキーワードで検索..." 
                       class="w-full pl-14 pr-6 py-5 rounded-3xl border-none ring-1 ring-slate-200 focus:ring-2 focus:ring-indigo-500 transition-all text-lg shadow-sm bg-white">
            </div>
            <div class="md:col-span-3">
                <select id="countryFilter" class="w-full px-6 py-5 rounded-3xl border-none ring-1 ring-slate-200 font-bold text-slate-600 shadow-sm focus:ring-2 focus:ring-indigo-500 bg-white">
                    <option value="all">全ての国・地域</option>
                    <option value="JPN">日本 (Japan)</option>
                    <option value="USA">アメリカ (USA)</option>
                    <option value="INT">国際組織 (International)</option>
                </select>
            </div>
            <div class="md:col-span-2">
                <button onclick="location.reload()" class="w-full h-full rounded-3xl bg-white ring-1 ring-slate-200 text-slate-600 hover:bg-slate-50 hover:text-indigo-600 transition-all shadow-sm flex items-center justify-center">
                    <i class="fas fa-sync-alt mr-2"></i> 更新
                </button>
            </div>
        </div>

        <!-- Document Grid -->
        <div id="document-grid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
            <!-- Loading -->
            <div class="col-span-full py-24 text-center">
                <i class="fas fa-circle-notch fa-spin text-4xl text-indigo-200"></i>
            </div>
        </div>
    </main>

    <script>
        let documents = [];
        const isGithubPages = window.location.hostname.includes('github.io');
        const indexPath = isGithubPages ? `/Document-Data-Base/data/master_index.json` : 'data/master_index.json';

        async function init() {
            try {
                const response = await fetch(`${indexPath}?t=${Date.now()}`);
                if (!response.ok) throw new Error();
                documents = await response.json();
                render(documents);
                document.getElementById('sync-text').innerText = `Synced: ${new Date().toLocaleTimeString()}`;
            } catch (e) {
                console.error("Fetch failed, using mock data for demo.");
                documents = [
                    { country: "USA", organization: "FED", title: "Beige Book - February 2026", date: "2026-02-05", category: "Economic Report", url: "https://www.federalreserve.gov/monetarypolicy/beigebook202602.htm" },
                    { country: "JPN", organization: "MOF", title: "令和7年度予算案のポイント", date: "2024-12-24", category: "Budget", url: "https://www.mof.go.jp/budget/budger_workflow/budget/fy2025/seian/01.pdf" },
                    { country: "INT", organization: "IMF", title: "World Economic Outlook 2024", date: "2024-10-22", category: "Global Economy", url: "https://www.imf.org/-/media/Files/Publications/WEO/2024/October/English/text.ashx" }
                ];
                render(documents);
            }
        }

        function highlightText(text, term) {
            if (!term) return text;
            const re = new RegExp(`(${term})`, "gi");
            return text.replace(re, `<span class="search-highlight">$1</span>`);
        }

        function render(items, searchTerm = "") {
            const grid = document.getElementById('document-grid');
            if (items.length === 0) {
                grid.innerHTML = `<div class="col-span-full py-20 text-center text-slate-400 font-bold">該当する文書はありません</div>`;
                return;
            }

            grid.innerHTML = items.map(doc => {
                const hasUrl = doc.url && doc.url !== "#";
                const displayTitle = highlightText(doc.title, searchTerm);
                
                return `
                    <div class="glass-card rounded-[2.5rem] p-9 flex flex-col h-full relative group">
                        <div class="flex justify-between items-center mb-8">
                            <div class="px-4 py-1.5 rounded-full bg-indigo-50 text-indigo-600 text-[10px] font-extrabold uppercase tracking-widest border border-indigo-100">
                                ${doc.country}
                            </div>
                            <div class="text-[11px] font-bold text-slate-300">${doc.date}</div>
                        </div>

                        <div class="text-[11px] font-black text-indigo-400 uppercase tracking-tighter mb-2">${doc.organization}</div>
                        <h3 class="text-xl font-extrabold text-slate-800 leading-tight mb-6 flex-grow group-hover:text-indigo-600 transition-colors">
                            ${displayTitle}
                        </h3>

                        <div class="pt-6 border-t border-slate-100 flex items-center justify-between">
                            <span class="text-[10px] font-bold text-slate-400 uppercase"><i class="fas fa-tag mr-1.5 opacity-50"></i>${doc.category || 'Economic'}</span>
                            
                            ${hasUrl ? `
                                <a href="${doc.url}" target="_blank" rel="noopener" 
                                   class="w-12 h-12 rounded-2xl bg-slate-900 text-white flex items-center justify-center hover:bg-indigo-600 transition-all shadow-lg hover:rotate-6">
                                    <i class="fas fa-chevron-right"></i>
                                </a>
                            ` : `
                                <span class="text-[10px] font-bold text-slate-300 italic">Processing...</span>
                            `}
                        </div>
                    </div>
                `;
            }).join('');
        }

        document.getElementById('searchInput').addEventListener('input', (e) => {
            const val = e.target.value.toLowerCase();
            const filtered = documents.filter(d => 
                d.title.toLowerCase().includes(val) || 
                d.organization.toLowerCase().includes(val) ||
                d.country.toLowerCase().includes(val)
            );
            render(filtered, val);
        });

        document.getElementById('countryFilter').addEventListener('change', (e) => {
            const val = e.target.value;
            const filtered = val === 'all' ? documents : documents.filter(d => d.country === val);
            render(filtered);
        });

        window.onload = init;
    </script>
</body>
</html>
